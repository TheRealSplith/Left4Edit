@{
    ViewBag.Title = "Index";
}

<div class="row">
  <div class="col-xs-2 col-xs-offset-1">
    <h2>Customers</h2>
  </div>
</div>
 <div class="row">
  <div class="col-md-2 col-md-offset-1" >
    <button class="btn btn-success btn-primary btn-small" data-toggle="modal" data-target="#myModal">
      <span class="glyphicon glyphicon-plus"></span>
      Add Customer
    </button>
  </div>
</div>
<div class="row">
  <div class="col-md-8 col-md-offset-1" >
    <div class="alert alert-warning alert-dismissable" data-bind="visible: showWarning">
      <button data-bind="click: refreshCustomers" type="button" class="glyphicon glyphicon-refresh" aria-hidden="true"></button>
      &nbsp;<strong>Warning!</strong> <span data-bind="text: warningMessage"></span>
    </div>
  </div>
  <div class="col-md-8 col-md-offset-1">
    <div class="alert alert-danger alert-dismissable" data-bind="visible: showError">
      <button type="button" class="close" data-bind="click: hideError" aria-hidden="true">&times;</button>
      <strong>Error!</strong> <span data-bind="text: errorMessage"></span>
    </div>
  </div>
</div>
@Html.Action("CustomerEditor",  new { targetProperty = "newCustomer", commandName = "$parent.commitCustomer"})
<div class="row">
  <div class="col-md-8 col-md-offset-1">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Symbol</th>
          <th>Name</th>
          <th>Commands</th>
        </tr>
      </thead>
      <tbody data-bind="foreach: customers">
        <tr>
          <td data-bind="text: Symbol"></td>
          <td data-bind="text: Name"></td>
          <td>
            <a data-bind="attr: { href: DetailLink }"
               class="btn btn-default btn-sm">
              <span class="glyphicon glyphicon-pencil"></span>
              Details
            </a>
            <a data-bind="click: $parent.deleteCustomer"
               class="btn btn-danger btn-sm">
              <span class="glyphicon glyphicon-remove"></span>
              Delete
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

@section scripts {
  <script type="text/javascript" src="/Scripts/Site/Left4EditModels.js"></script>
  <script type="text/javascript" src="/Scripts/Site/Customer_Index_VM.js"></script>
  }